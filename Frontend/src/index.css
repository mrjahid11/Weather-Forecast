body{font-family:Arial, Helvetica, sans-serif;color:var(--fg);background:var(--bg);margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;overflow-x:hidden}
/* CSS variables for theming */
:root{--bg:#f3f7fb;--fg:#222;--panel:rgba(255,255,255,0.9);--accent:#1976d2;--border:#cfd8dc}
.mode-dark{--bg:#0c1220;--fg:#e6eef8;--panel:rgba(12,17,28,0.7);--accent:#64b5f6;--border:#263342}

/* Animated backgrounds by theme */
/* Base decorative svg backdrop for subtle texture */
body::before{content:"";position:fixed;inset:0;background-image:linear-gradient(180deg, rgba(25,118,210,0.18), rgba(255,255,255,0.18)), url('/images/weather-bg.svg');background-size:cover;background-position:center;background-attachment:fixed;z-index:-3;opacity:0.6;}

/* Sunny Day: gentle gradient and drifting clouds */
.theme-sunny-day::after{content:"";position:fixed;inset:-20% -20% 0 -20%;z-index:-2;background:
	radial-gradient(circle at 85% 12%, rgba(255,215,106,0.7) 0%, rgba(255,215,106,0) 45%),
	linear-gradient(180deg,#87CEEB,#E0F2FF);
opacity:0.9;animation:sunGlow 8s ease-in-out infinite alternate}
.theme-cloudy::after{content:"";position:fixed;inset:0;z-index:-2;background:
	linear-gradient(180deg,#b7cbe0,#e5eef7)}
.theme-cloudy .clouds{position:fixed;inset:0;z-index:-1;pointer-events:none}
.theme-sunny-day .clouds,.theme-cloudy .clouds{position:fixed;inset:0;z-index:-1;pointer-events:none}
.theme-sunny-day .clouds span,.theme-cloudy .clouds span{position:absolute;background:#fff;border-radius:50px;filter:blur(2px);opacity:.8;animation:cloudDrift 60s linear infinite}
.theme-sunny-day .clouds span:nth-child(1){width:140px;height:46px;left:10%;top:20%;animation-duration:70s}
.theme-sunny-day .clouds span:nth-child(2){width:160px;height:52px;left:35%;top:28%}
.theme-sunny-day .clouds span:nth-child(3){width:120px;height:40px;left:60%;top:18%;animation-duration:80s}
.theme-sunny-day .clouds span:nth-child(4){width:180px;height:56px;left:75%;top:30%}
/* A simple sun disc for sunny days */
.theme-sunny-day .sun{position:fixed;right:10vw;top:10vh;width:120px;height:120px;border-radius:50%;
  background:radial-gradient(circle at 35% 35%, rgba(255,235,130,1) 0%, rgba(255,220,90,0.95) 35%, rgba(255,210,60,0.6) 55%, rgba(255,210,60,0.0) 75%);
  box-shadow:0 0 60px rgba(255,215,106,0.6), 0 0 120px rgba(255,215,106,0.35);
  animation:sunGlow 6s ease-in-out infinite alternate}

/* Night: stars twinkling */
.theme-night::after{content:"";position:fixed;inset:0;z-index:-2;background:linear-gradient(180deg,#0b1020,#1a2440)}
.theme-night .stars{position:fixed;inset:0;z-index:-1;pointer-events:none;background:transparent}
.theme-night .stars::before,.theme-night .stars::after{content:"";position:absolute;inset:0;box-shadow:
	20vw 10vh #fff, 40vw 30vh #dbe9ff, 60vw 20vh #fff, 80vw 40vh #cfe1ff,
	10vw 50vh #fff, 30vw 70vh #dbe9ff, 50vw 60vh #fff, 70vw 80vh #cfe1ff; width:2px;height:2px; border-radius:2px;opacity:.8;animation:starTwinkle 4s ease-in-out infinite alternate}
.theme-night .stars::after{transform:translate(-15vw,-10vh);opacity:.6;animation-duration:5.5s}
/* Night clouds are darker and subtler */
.theme-night .clouds{position:fixed;inset:0;z-index:-1;pointer-events:none}
.theme-night .clouds span{position:absolute;background:rgba(255,255,255,0.18);border-radius:50px;filter:blur(2px);opacity:.7;animation:cloudDrift 80s linear infinite}
.theme-night .clouds span:nth-child(1){width:160px;height:50px;left:12%;top:18%;animation-duration:90s}
.theme-night .clouds span:nth-child(2){width:180px;height:56px;left:58%;top:22%;animation-duration:95s}

/* Moon with simple phase variants */
.theme-night .moon{position:fixed;right:12vw;top:12vh;width:90px;height:90px;border-radius:50%;
	background:radial-gradient(circle at 30% 30%, rgba(255,255,230,0.98) 0%, rgba(255,255,230,0.8) 35%, rgba(255,255,230,0.35) 60%, rgba(255,255,230,0.05) 75%, rgba(255,255,230,0) 80%);
	box-shadow:0 0 45px rgba(255,255,230,0.35)}
.theme-night .moon.full{opacity:1}
.theme-night .moon.half{opacity:1}
.theme-night .moon.half.left-lit{clip-path:inset(0 50% 0 0)}
.theme-night .moon.half.right-lit{clip-path:inset(0 0 0 50%)}
.theme-night .moon.other{opacity:.85;transform:scale(.85)}

/* Shooting stars */
.theme-night .shooting{position:fixed;inset:0;z-index:-1;pointer-events:none}
.theme-night .shooting .shoot{position:absolute;left:var(--sx,112vw);top:var(--sy,-20vh);width:20vw;max-width:300px;height:2px;
	background:linear-gradient(90deg, rgba(255,255,255,1), rgba(255,255,255,0));
	transform:rotate(var(--rot,-45deg));transform-origin:center;filter:drop-shadow(0 0 6px rgba(255,255,255,0.7));
	animation:shoot var(--dur,6.8s) ease-out infinite var(--delay,0s);will-change:transform,opacity}
.theme-night .shooting .shoot::before{content:"";position:absolute;left:-4px;top:-2px;width:6px;height:6px;border-radius:50%;background:#fff;box-shadow:0 0 10px #fff}
.theme-night .shooting .shoot.delay{--sx:118vw;--sy:-30vh;--dur:7.4s;--delay:1.8s}
.theme-night .shooting .shoot.delay2{--sx:105vw;--sy:-24vh;--dur:8.1s;--delay:3.2s}

/* Calm/reduced motion: hide fast star trails */
.motion-calm .shooting, .reduce-motion .shooting{display:none}

/* Rain: falling raindrops */
.theme-rain::after{content:"";position:fixed;inset:0;z-index:-2;background:linear-gradient(180deg,#2a3b54,#5a7aa6)}
/* Raindrop particles */
.theme-rain .raindrops{position:fixed;inset:-10% 0 0 0;z-index:-1;pointer-events:none}
.theme-rain .raindrops .drop{position:absolute;top:-12vh;width:8px;height:14px;
	background: radial-gradient(40% 45% at 40% 35%, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.2) 60%, rgba(255,255,255,0) 70%),
							linear-gradient(180deg, rgba(255,255,255,0.35), rgba(255,255,255,0.02));
	border-radius: 50% 50% 60% 60% / 65% 65% 45% 45%;
	transform: rotate(15deg);
	filter: blur(0.2px);
	opacity: .7;
	animation: dropFall var(--t,6.5s) linear infinite;
	left: var(--x, 50%);
	animation-delay: var(--d, 0s);
}

/* Layout a bunch of drops across the screen with varied speed/offset */
.theme-rain .raindrops .drop:nth-child(1){--x:5%;--t:6.5s;--d:-1s}
.theme-rain .raindrops .drop:nth-child(2){--x:10%;--t:7.2s;--d:-2.8s}
.theme-rain .raindrops .drop:nth-child(3){--x:14%;--t:6.0s;--d:-1.7s}
.theme-rain .raindrops .drop:nth-child(4){--x:18%;--t:7.8s;--d:-0.6s}
.theme-rain .raindrops .drop:nth-child(5){--x:22%;--t:6.9s;--d:-3.1s}
.theme-rain .raindrops .drop:nth-child(6){--x:26%;--t:6.2s;--d:-2.2s}
.theme-rain .raindrops .drop:nth-child(7){--x:29%;--t:7.5s;--d:-0.8s}
.theme-rain .raindrops .drop:nth-child(8){--x:33%;--t:6.6s;--d:-1.3s}
.theme-rain .raindrops .drop:nth-child(9){--x:37%;--t:7.1s;--d:-2.6s}
.theme-rain .raindrops .drop:nth-child(10){--x:41%;--t:6.1s;--d:-0.4s}
.theme-rain .raindrops .drop:nth-child(11){--x:45%;--t:7.6s;--d:-1.9s}
.theme-rain .raindrops .drop:nth-child(12){--x:49%;--t:6.4s;--d:-2.4s}
.theme-rain .raindrops .drop:nth-child(13){--x:53%;--t:7.0s;--d:-0.9s}
.theme-rain .raindrops .drop:nth-child(14){--x:57%;--t:6.3s;--d:-1.6s}
.theme-rain .raindrops .drop:nth-child(15){--x:61%;--t:7.9s;--d:-2.1s}
.theme-rain .raindrops .drop:nth-child(16){--x:65%;--t:6.8s;--d:-1.1s}
.theme-rain .raindrops .drop:nth-child(17){--x:69%;--t:6.0s;--d:-2.7s}
.theme-rain .raindrops .drop:nth-child(18){--x:72%;--t:7.3s;--d:-0.7s}
.theme-rain .raindrops .drop:nth-child(19){--x:75%;--t:6.6s;--d:-1.4s}
.theme-rain .raindrops .drop:nth-child(20){--x:78%;--t:7.2s;--d:-2.9s}
.theme-rain .raindrops .drop:nth-child(21){--x:81%;--t:6.5s;--d:-0.3s}
.theme-rain .raindrops .drop:nth-child(22){--x:84%;--t:7.8s;--d:-1.8s}
.theme-rain .raindrops .drop:nth-child(23){--x:87%;--t:6.2s;--d:-2.3s}
.theme-rain .raindrops .drop:nth-child(24){--x:90%;--t:7.4s;--d:-1.2s}
.theme-rain .raindrops .drop:nth-child(25){--x:12%;--t:6.7s;--d:-3.4s}
.theme-rain .raindrops .drop:nth-child(26){--x:24%;--t:7.1s;--d:-4.2s}
.theme-rain .raindrops .drop:nth-child(27){--x:36%;--t:6.3s;--d:-3.6s}
.theme-rain .raindrops .drop:nth-child(28){--x:48%;--t:7.0s;--d:-4.0s}
.theme-rain .raindrops .drop:nth-child(29){--x:60%;--t:6.1s;--d:-3.2s}
.theme-rain .raindrops .drop:nth-child(30){--x:72%;--t:7.6s;--d:-4.4s}
.theme-rain .raindrops .drop:nth-child(31){--x:84%;--t:6.4s;--d:-3.8s}
.theme-rain .raindrops .drop:nth-child(32){--x:96%;--t:7.3s;--d:-4.6s}

/* Slight size variation */
.theme-rain .raindrops .drop:nth-child(3n){width:9px;height:16px;opacity:.6}
.theme-rain .raindrops .drop:nth-child(5n){width:7px;height:12px;opacity:.55}
.theme-rain .raindrops .drop:nth-child(7n){width:10px;height:18px;opacity:.65}

/* Calm/reduced-motion: hide drops and show soft mist */
.motion-calm.theme-rain .raindrops .drop, .reduce-motion.theme-rain .raindrops .drop{display:none}
.motion-calm.theme-rain .raindrops::after, .reduce-motion.theme-rain .raindrops::after{content:"";position:absolute;inset:0;background:
	radial-gradient(120% 80% at 50% 10%, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0) 60%),
	radial-gradient(100% 70% at 20% 90%, rgba(255,255,255,0.07) 0%, rgba(255,255,255,0) 60%),
	radial-gradient(90% 60%  at 80% 80%, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0) 60%)}

/* Storm: darker + lightning flashes */
.theme-storm::after{content:"";position:fixed;inset:0;z-index:-2;background:linear-gradient(180deg,#131a26,#2a3448)}
.theme-storm .lightning{position:fixed;inset:0;z-index:-1;background:
	radial-gradient(circle at 60% 20%, rgba(255,255,255,0.0), rgba(255,255,255,0)),
	radial-gradient(circle at 30% 15%, rgba(255,255,255,0.0), rgba(255,255,255,0));
animation:flash 8s ease-in-out infinite}

/* Storm raindrops: denser/faster than rain */
.theme-storm .raindrops{position:fixed;inset:-10% 0 0 0;z-index:-1;pointer-events:none}
.theme-storm .raindrops .drop{position:absolute;top:-14vh;width:9px;height:16px;
	background: radial-gradient(40% 45% at 40% 35%, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.25) 60%, rgba(255,255,255,0) 72%),
							linear-gradient(180deg, rgba(255,255,255,0.38), rgba(255,255,255,0.03));
	border-radius: 50% 50% 60% 60% / 65% 65% 45% 45%;
	transform: rotate(18deg);
	filter: blur(0.25px);
	opacity:.8;
	animation: dropFall var(--t,5.6s) linear infinite;
	left: var(--x, 50%);
	animation-delay: var(--d, 0s);
}
.theme-storm .raindrops .drop:nth-child(3n){width:10px;height:18px;opacity:.7}
.theme-storm .raindrops .drop:nth-child(5n){width:8px;height:14px;opacity:.65}
.theme-storm .raindrops .drop:nth-child(7n){width:11px;height:20px;opacity:.75}

/* Position/speed variety */
.theme-storm .raindrops .drop:nth-child(1){--x:4%;--t:5.8s;--d:-1.2s}
.theme-storm .raindrops .drop:nth-child(2){--x:8%;--t:6.2s;--d:-2.4s}
.theme-storm .raindrops .drop:nth-child(3){--x:12%;--t:5.4s;--d:-1.6s}
.theme-storm .raindrops .drop:nth-child(4){--x:16%;--t:6.6s;--d:-0.5s}
.theme-storm .raindrops .drop:nth-child(5){--x:20%;--t:5.9s;--d:-2.9s}
.theme-storm .raindrops .drop:nth-child(6){--x:24%;--t:5.3s;--d:-2.1s}
.theme-storm .raindrops .drop:nth-child(7){--x:28%;--t:6.7s;--d:-0.7s}
.theme-storm .raindrops .drop:nth-child(8){--x:32%;--t:5.6s;--d:-1.2s}
.theme-storm .raindrops .drop:nth-child(9){--x:36%;--t:6.1s;--d:-2.5s}
.theme-storm .raindrops .drop:nth-child(10){--x:40%;--t:5.2s;--d:-0.3s}
.theme-storm .raindrops .drop:nth-child(11){--x:44%;--t:6.8s;--d:-1.8s}
.theme-storm .raindrops .drop:nth-child(12){--x:48%;--t:5.5s;--d:-2.3s}
.theme-storm .raindrops .drop:nth-child(13){--x:52%;--t:6.0s;--d:-0.8s}
.theme-storm .raindrops .drop:nth-child(14){--x:56%;--t:5.4s;--d:-1.5s}
.theme-storm .raindrops .drop:nth-child(15){--x:60%;--t:6.9s;--d:-2.0s}
.theme-storm .raindrops .drop:nth-child(16){--x:64%;--t:5.8s;--d:-1.0s}
.theme-storm .raindrops .drop:nth-child(17){--x:68%;--t:5.0s;--d:-2.6s}
.theme-storm .raindrops .drop:nth-child(18){--x:72%;--t:6.3s;--d:-0.6s}
.theme-storm .raindrops .drop:nth-child(19){--x:76%;--t:5.6s;--d:-1.3s}
.theme-storm .raindrops .drop:nth-child(20){--x:80%;--t:6.2s;--d:-2.7s}
.theme-storm .raindrops .drop:nth-child(21){--x:84%;--t:5.7s;--d:-0.2s}
.theme-storm .raindrops .drop:nth-child(22){--x:88%;--t:6.6s;--d:-1.7s}
.theme-storm .raindrops .drop:nth-child(23){--x:92%;--t:5.3s;--d:-2.2s}
.theme-storm .raindrops .drop:nth-child(24){--x:96%;--t:6.5s;--d:-1.1s}

/* Calm/reduced: hide drops and flashes */
.motion-calm.theme-storm .raindrops .drop, .reduce-motion.theme-storm .raindrops .drop{display:none}
.motion-calm.theme-storm .lightning, .reduce-motion.theme-storm .lightning{animation:none}

/* Snow: gentle flakes */
.theme-snow::after{content:"";position:fixed;inset:0;z-index:-2;background:linear-gradient(180deg,#dce8f7,#f2f6fc)}
.theme-snow .precip{position:fixed;inset:-10% 0 0 0;z-index:-1;background-image:radial-gradient(#fff 1px, transparent 2px), radial-gradient(#fff 1px, transparent 2px);background-size:14px 14px, 22px 22px;background-position:0 0, 7px 7px;opacity:.5;animation:snowFall 12s linear infinite}

/* Fog: low contrast haze */
.theme-fog::after{content:"";position:fixed;inset:0;z-index:-2;background:linear-gradient(180deg,#cfd6dd,#eef2f5)}
.theme-fog .haze{position:fixed;inset:0;z-index:-1;background:radial-gradient(circle at 50% 50%, rgba(255,255,255,0.45), rgba(255,255,255,0.2) 40%, rgba(255,255,255,0) 60%);filter:blur(10px)}

@keyframes cloudDrift{0%{transform:translateX(-10vw)}100%{transform:translateX(110vw)}}
@keyframes sunGlow{from{filter:brightness(1)}to{filter:brightness(1.1)}}
@keyframes starTwinkle{from{opacity:.5}to{opacity:1}}
@keyframes rainDrift{from{background-position:0 0}to{background-position:0 60px}}
@keyframes rainSlide{from{background-position:0 0}to{background-position:-2000px 2000px}}
@keyframes snowFall{from{transform:translateY(-20px)}to{transform:translateY(40px)}}
@keyframes flash{0%, 100%{opacity:0} 45%{opacity:0} 46%{opacity:.65} 47%{opacity:0} 75%{opacity:0} 76%{opacity:.5} 77%{opacity:0}}
@keyframes dropFall{0%{transform:translate3d(0,-12vh,0) rotate(15deg)}100%{transform:translate3d(0,115vh,0) rotate(15deg)}}
@keyframes ripple{0%{transform:translate(-50%,0) scale(0.2);opacity:.35}70%{opacity:.22}100%{transform:translate(-50%,0) scale(1);opacity:0}}
@keyframes shoot{0%{transform:translate3d(0,0,0) rotate(var(--rot,-45deg));opacity:0}
	10%{opacity:1}
	85%{opacity:.5}
	100%{transform:translate3d(var(--dx,-240vw),var(--dy,160vh),0) rotate(var(--rot,-45deg));opacity:0}}
.container{max-width:720px;width:92%;margin:24px;padding:24px;background:var(--panel);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);
	border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.18)}
.theme-sunny-day.mode-light .container{background:rgba(255,255,255,0.96);box-shadow:0 14px 44px rgba(0,0,0,0.22), 0 0 0 1px rgba(0,0,0,0.05)}
.mode-dark .container{box-shadow:0 14px 44px rgba(0,0,0,0.45)}
.header-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
.icon-btn{background:transparent;border:1px solid var(--border);color:var(--fg);border-radius:8px;padding:6px 8px;cursor:pointer}
.icon-btn:hover{border-color:var(--accent)}
.settings-panel{margin:12px 0;padding:12px;border:1px dashed var(--border);border-radius:10px;background:rgba(0,0,0,0.03)}
.mode-dark .settings-panel{background:rgba(255,255,255,0.04)}
.settings-panel .row{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:8px 0}
.settings-panel .row.end{justify-content:flex-end}
.link-btn{background:transparent;border:none;color:var(--accent);cursor:pointer}
.form{display:flex;gap:10px;margin:16px 0;justify-content:center;flex-wrap:wrap}
.form input{flex:1;min-width:240px;max-width:440px;padding:10px 12px;border:1px solid var(--border);border-radius:8px;outline:none;background:transparent;color:var(--fg)}
.form button{padding:10px 14px;border:none;background:var(--accent);color:#fff;border-radius:8px;cursor:pointer;transition:transform .15s ease}
.form button:disabled{opacity:0.7;cursor:not-allowed}
.unit-toggle{display:flex;gap:6px}
.unit-toggle button{padding:8px 10px;border:1px solid var(--border);background:transparent;color:var(--accent);border-radius:8px;cursor:pointer}
.unit-toggle button.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.error{color:#b00020;margin-top:12px}
.day{padding:6px 0;border-bottom:1px solid #eee}
.result .current{margin-bottom:12px}
.chart-wrapper{max-width:100%;height:320px;margin-top:12px}
.chart-wrapper canvas{max-height:320px}
/* Chart wrapper to make the chart responsive and pleasant */
.chart-wrapper{max-width:100%;height:320px;margin-top:12px}
.chart-wrapper canvas{max-height:320px}

/* Theme-driven ambient layers in markup (optional elements) */
.ambient-layer{position:fixed;inset:0;z-index:-1;pointer-events:none}
.hidden{display:none}

/* Marine panel styles */
.marine-block{margin-top:16px;padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));border:1px solid var(--border)}
.marine-controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.marine-controls input[type="number"]{width:84px;padding:6px;border-radius:6px;border:1px solid var(--border);background:transparent;color:var(--fg)}
.marine-chart-wrapper{margin-top:12px}
.marine-note{font-size:12px;margin-top:8px;color:var(--fg)}
.marine-error{color:#b00020;margin-top:8px}

/* Ground ripple layer */
.ripples{position:fixed;left:0;right:0;bottom:0;height:28vh;z-index:-1;pointer-events:none}
.ripples .ripple{position:absolute;bottom:2vh;left:var(--x,50%);width:120px;height:120px;border-radius:50%;background:
	radial-gradient(closest-side, rgba(255,255,255,0.18), rgba(255,255,255,0.08) 40%, rgba(255,255,255,0) 70%);
	transform-origin:center;animation:ripple var(--t,2.5s) ease-out infinite;animation-delay:var(--d,0s);filter:blur(0.6px)}

.motion-calm .ripples .ripple, .reduce-motion .ripples .ripple{display:none}

/* Reduced motion: prefer gentle visuals */
.reduce-motion .ambient-layer,
.reduce-motion .clouds span,
.reduce-motion .stars::before,
.reduce-motion .stars::after,
.reduce-motion .lightning,
.reduce-motion::before,
.reduce-motion::after{animation:none !important}
.reduce-motion .precip{opacity:.08}
.reduce-motion .clouds span{opacity:.6}

@media (prefers-reduced-motion: reduce){
	.ambient-layer,
	.clouds span,
	.stars::before,
	.stars::after,
	.lightning,
	body::before,
	body::after{animation:none !important}
}
